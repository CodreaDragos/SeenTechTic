<div class="container">
  <h1 class="page-title">Postări</h1>
  <app-posts-new (postCreated)="loadPosts()"></app-posts-new>

  <div *ngFor="let post of posts" class="post-wrapper">
    <div class="post-card">
      <h3 class="post-title">{{ post.postTitle }}</h3>
      
      <p class="post-description">{{ post.postDescription }}</p>
      
      <div class="post-meta">
        <div class="meta-item" *ngIf="post.reservation">
  <i class="fas fa-calendar-alt"></i> Rezervare: {{ post.reservation.StartTime | date:'shortDate' }} 
  de la {{ post.reservation.StartTime | date:'shortTime' }} la {{ post.reservation.EndTime | date:'shortTime' }}
</div>

        <div class="meta-item">
          <i class="fas fa-clock"></i> Creat la: {{ post.createdAt | date:'short' }}
        </div>
        <div class="meta-item" *ngIf="post.reservation">
  <i class="fas fa-calendar-alt"></i> Rezervare ID: {{ post.reservation.ReservationId }}<br>
  Ora: de la {{ post.reservation.StartTime | date:'shortTime' }} la {{ post.reservation.EndTime | date:'shortTime' }}
</div>

      </div>
      
      <div class="post-actions">
        <!-- Buttons hidden as per user request -->
      </div>
      
      <div class="comments-section">
        <h4 class="comments-title">
          <i class="fas fa-comments"></i> Comentarii
        </h4>
        
        <div *ngFor="let comment of post.comments" class="comment">
          <p class="comment-content">{{ comment.commentContent }}</p>
          <div class="comment-meta">
            <span class="comment-author">{{ comment.author?.username || 'Anonim' }}</span>
            <span>{{ comment.createdAt | date:'short' }}</span>
          </div>
        </div>
        
        <div class="comment-form">
          <textarea [(ngModel)]="newCommentContent[post.postId || 0]" placeholder="Adaugă un comentariu..."></textarea>
          <button (click)="addComment(post)" class="comment-button">
            <i class="fas fa-paper-plane"></i> Adaugă Comentariu
          </button>
        </div>
      </div>
    </div>

    <app-posts-edit 
      *ngIf="editingPostId === post.postId" 
      [editPost]="post" 
      (postUpdated)="onPostUpdated($event)">
    </app-posts-edit>
  </div>
</div>
